# How will you debug a JavaScript application?

Debugging is a critical skill for JavaScript developers. Learning systematic debugging approaches helps identify and fix issues efficiently. This guide covers both basic and advanced debugging techniques.

## Essential Debugging Tools

### **Browser Developer Tools (Chrome/Firefox/Safari DevTools)**

#### **Console Tab**
```javascript
// Different console methods for different types of output
console.log('Basic logging:', variable);       // General logging
console.error('Error message');                // Error logging
console.warn('Warning message');               // Warning logging
console.info('Information message');           // Info logging
console.table([{name: 'John', age: 30}]);      // Table format
console.group('User Details');                 // Group related logs
console.log('Name: John');
console.log('Age: 30');
console.groupEnd();

// Conditional logging
const debug = true;
debug && console.log('Debug info:', data);
```

#### **Sources Tab (Breakpoints)**
```javascript
// Set breakpoint in code (click line number in DevTools)
// Or use debugger statement in code
function problematicFunction() {
  const data = fetchData();
  debugger;  // Execution pauses here
  processData(data);
}
```

#### **Network Tab**
- Monitor HTTP requests/responses
- Check status codes, timing, payload
- Identify AJAX failures

#### **Application Tab**
- Inspect Local Storage, Session Storage, Cookies
- Check Service Workers, Cache Storage
- View IndexedDB data

## Debugging Techniques

### **1. Console.log Debugging**
```javascript
// Basic debugging pattern
function validateUser(user) {
  console.log('Input user:', user);

  if (!user) {
    console.error('User is null/undefined');
    return false;
  }

  if (!user.name) {
    console.warn('User missing name property');
  }

  console.log('User validation complete');
  return true;
}

// Group related logs
console.group('Authentication Process');
console.log('Step 1: Validate credentials');
console.log('Step 2: Check database');
console.log('Step 3: Generate token');
console.groupEnd();

// Measure performance
console.time('API Call');
fetch('/api/data')
  .then(() => {
    console.timeEnd('API Call');  // Logs elapsed time
  });
```

### **2. Debugger Statement**
```javascript
function complexCalculation(a, b, c) {
  let result = a;

  debugger;  // Pauses execution, opens debugger

  result += b;
  result *= c;

  return result;
}

// In DevTools, you can:
// - Step over, step into, step out
// - Inspect variables
// - Modify variables temporarily
// - Resume execution
```

### **3. Breakpoint Debugging**
```javascript
// Conditional breakpoint
function processUsers(users) {
  for (let i = 0; i < users.length; i++) {
    const user = users[i];

    // Browser DevTools: Right-click line number
    // Add conditional breakpoint: i === 5
    if (user.role === 'admin') {
      grantAdminAccess(user);
    }
  }
}

// DOM breakpoint (elements modified)
element.addEventListener('change', function() {
  // Set breakpoint in DevTools on DOM modifications
  updateUI();
});
```

### **4. Error Handling and Logging**
```javascript
// Try-catch for error tracking
async function fetchUserData(userId) {
  try {
    console.log('Fetching user data for ID:', userId);
    const response = await fetch(`/api/users/${userId}`);

    if (!response.ok) {
      console.error('API Error:', response.status, response.statusText);
      throw new Error(`HTTP ${response.status}`);
    }

    const data = await response.json();
    console.log('Data received:', data);
    return data;
  } catch (error) {
    console.error('fetchUserData failed:', error);
    // Could send to error tracking service (Sentry, LogRocket, etc.)
    throw error;
  }
}

// Unhandled promise rejection tracking
window.addEventListener('unhandledrejection', event => {
  console.error('Unhandled promise rejection:', event.reason);
  // Log to monitoring service
});
```

### **5. Assertions and Validation**
```javascript
// Custom assertion function
function assert(condition, message) {
  if (!condition) {
    console.error('Assertion failed:', message);
    debugger;  // Pause execution
  }
}

function divide(a, b) {
  assert(b !== 0, `Division by zero: ${a}/${b}`);
  assert(typeof a === 'number' && typeof b === 'number', 'Arguments must be numbers');

  return a / b;
}
```

## Advanced Debugging Techniques

### **1. Source Maps for Minified Code**
```json
// webpack.config.js for development
module.exports = {
  devtool: 'source-map',  // Generates .map files
  // Now you can see original TypeScript/React/JSX code in DevTools
};
```

### **2. Remote Debugging**
```javascript
// Debug Node.js applications
// Start with --inspect flag
node --inspect app.js

// Or --inspect-brk to pause on first line
node --inspect-brk app.js
```

### **3. REPL (Read-Eval-Print Loop)**
```javascript
// In Node.js terminal
node
> const data = require('./data.json');
undefined
> data.users.forEach(user => console.log(user.name));
undefined
```

### **4. Time Travel Debugging**
```javascript
// Record function calls for replay
class Debugger {
  constructor() {
    this.history = [];
  }

  wrapFunction(fn, name) {
    return (...args) => {
      const callId = this.history.length;
      this.history.push({
        name,
        args: [...args],
        timestamp: Date.now(),
        result: null,
        error: null
      });

      try {
        const result = fn(...args);
        this.history[callId].result = result;
        return result;
      } catch (error) {
        this.history[callId].error = error;
        throw error;
      }
    };
  }

  getHistory() {
    return this.history;
  }
}

const debugger = new Debugger();
const debuggedAdd = debugger.wrapFunction((a, b) => a + b, 'add');
```

### **5. Heap Snapshots and Memory Debugging**
```javascript
// Monitor memory usage
function logMemoryUsage() {
  const used = process.memoryUsage();
  console.log('Memory usage:', {
    rss: `${Math.round(used.rss / 1024 / 1024 * 100) / 100} MB`,
    heapTotal: `${Math.round(used.heapTotal / 1024 / 1024 * 100) / 100} MB`,
    heapUsed: `${Math.round(used.heapUsed / 1024 / 1024 * 100) / 100} MB`,
  });
}

// In DevTools: Memory tab
// - Take heap snapshot
// - Compare snapshots to find memory leaks
```

## Debugging Frameworks and Libraries

### **Error Tracking Services**
```javascript
// Sentry integration
import * as Sentry from "@sentry/browser";

Sentry.init({
  dsn: "your-dsn-here",
});

// Errors automatically captured and sent to dashboard

// Custom error reporting
try {
  riskFunction();
} catch (error) {
  Sentry.captureException(error);
}
```

### **Development Tools**
```javascript
// React DevTools for component debugging
// Redux DevTools for state debugging
// Vue DevTools for Vue applications
// Angular DevTools for Angular applications
```

## Systematic Debugging Process

### **1. Reproduce the Issue**
```javascript
// Create minimal test case
function reproduceBug() {
  const testData = { id: 123, name: 'Test' };
  processData(testData);
}
```

### **2. Add Logging**
```javascript
function processData(data) {
  console.log('ðŸš€ Starting processData');
  console.log('ðŸ“ Input data:', data);

  try {
    // Process logic with step-by-step logging
    const step1 = validateInput(data);
    console.log('âœ… Step 1 (validate):', step1);

    const step2 = transformData(step1);
    console.log('âœ… Step 2 (transform):', step2);

    const result = saveData(step2);
    console.log('âœ… Step 3 (save):', result);

    return result;
  } catch (error) {
    console.error('âŒ Error in processData:', error);
    throw error;
  }
}
```

### **3. Use Breakpoints**
```javascript
function processData(data) {
  if (data.id === 123) {
    debugger;  // Conditional breakpoint
  }

  // Rest of code...
}
```

### **4. Inspect Variables and State**
```javascript
// In DevTools console or code:
console.log('Current state:', getState());      // Redux/Vuex state
console.log('DOM element:', document.querySelector('.error'));
console.log('Local variables:', { data, result, error });

// Inspect object deeply
console.dir(someObject);  // Shows all properties
```

### **5. Test Hypotheses**
```javascript
// Temporary fix to test theory
function processData(data) {
  // Temporarily disable feature
  if (data.experimental) {
    console.log('â­ï¸ Skipping experimental feature');
    data.experimental = false;
  }

  // Original logic...
}
```

### **6. Monitor Network Requests**
```javascript
// Intercept fetch requests
const originalFetch = window.fetch;
window.fetch = function(url, options) {
  console.log('ðŸŒ Fetch request:', url, options);
  return originalFetch(url, options)
    .then(response => {
      console.log('ðŸ“¥ Response:', response.status, response.statusText);
      return response;
    })
    .catch(error => {
      console.error('âŒ Fetch error:', error);
      throw error;
    });
};
```

## Common JavaScript Bugs and Fixes

### **1. Async/Sync Issues**
```javascript
// Bug: Not waiting for async operation
function loadUser() {
  let user;
  fetch('/api/user')
    .then(response => response.json())
    .then(data => user = data);

  return user; // undefined - data hasn't loaded yet
}

// Fix: Make function async
async function loadUser() {
  const response = await fetch('/api/user');
  const user = await response.json();
  return user;
}
```

### **2. Variable Scope Issues**
```javascript
// Bug: Variable hoisting
for (var i = 0; i < 3; i++) {
  setTimeout(() => console.log(i), 100); // Logs 3, 3, 3
}

// Fix: Use block scope
for (let i = 0; i < 3; i++) {
  setTimeout(() => console.log(i), 100); // Logs 0, 1, 2
}
```

### **3. Reference vs Value Issues**
```javascript
// Bug: Modifying reference affects original
const original = { count: 1 };
const copy = original;  // Reference, not copy
copy.count = 2;
console.log(original.count); // 2, unexpectedly changed

// Fix: Deep clone
const copy = JSON.parse(JSON.stringify(original));
// Or use spread operator
const copy = { ...original };
```

## Interview Questions

### Q: What's your debugging process?
**A**: Reproduce â†’ Log â†’ Breakpoint â†’ Inspect â†’ Hypothesis â†’ Test â†’ Fix â†’ Verify

### Q: How do you debug async code?
**A**: Use async/await instead of promises, set breakpoints in promise chains, use console.log with unique identifiers, check network tab

### Q: What's the difference between console.log and debugger?
**A**: console.log shows output, debugger pauses execution for inspection/modification

### Q: How do you handle debugging in production?
**A**: Use error tracking services (Sentry), log aggregation (LogRocket), feature flags, gradual rollouts

Systematic debugging combines tools, techniques, and logical thinking to efficiently resolve issues and improve code quality.
